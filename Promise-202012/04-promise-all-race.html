<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<script type="text/javascript">
//======================  一、Promise.all()  ==============
/* 接收一个promise对象数组，返回一个promise对象。
有一个promise对象失败，就返回失败结果值。都成功时，promiseResult为返回的所有成功结果值。
 */
//============1、都成功==============
    var arr1=[];
    arr1[0]=new Promise((resolve,reject)=>{
       resolve("成功");
    })
    arr1[1]=Promise.resolve("success");
    arr1[2]=Promise.resolve("ok");

    let result=Promise.all(arr1);
    console.log(result);
   /*  返回结果
   [[PromiseState]]: "fulfilled"
    [[PromiseResult]]: Array(3)
    0: "成功"
    1: "success"
    2: "ok" */
//============2、有失败，promiseResult为第一个失败的值==============
var arr2=[];
    arr2[0]=Promise.resolve("成功");
    arr2[1]=Promise.reject("失败");
    arr2[2]=Promise.resolve("success");
    arr2[3]=Promise.reject("error");
    arr2[4]=Promise.resolve("ok");

    let result2=Promise.all(arr2);
    console.log(result2);

//====================== 二、Promise.race() ==============================
/*  接收一个promise对象数组,返回一个promise对象。
    第一个执行完的promise的状态结果，就是最终的结果状态。
 */
 //=========1、因为这里无异步任务时，是arr1[0]的状态结果为最终结果状态。======
let result3=Promise.race(arr1)
console.log(result3);

//===========2、有异步任务时，第一个执行完的决定=====
var arr3=[];
    arr3[0]=new Promise((resolve,reject)=>{
       setTimeout(()=>resolve("成功")
       ,1000);
    })
    arr3[1]=Promise.reject("失败");
    arr3[2]=Promise.resolve("ok");

    let result4=Promise.all(arr3);
    console.log(result4);
/* [[PromiseState]]: "rejected"
[[PromiseResult]]: "失败" */


</script>
</body>
</html>